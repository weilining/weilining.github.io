// 烟花爆炸圆特效
"use strict";function updateCoords(t){pointerX=(t.clientX||t.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=t.clientY||t.touches[0].clientY-canvasEl.getBoundingClientRect().top}function setParticuleDirection(t){var e=anime.random(0,360)*Math.PI/180,n=anime.random(50,180),i=[-1,1][anime.random(0,1)]*n;return{x:t.x+i*Math.cos(e),y:t.y+i*Math.sin(e)}}function createParticule(t,e){var n={};return n.x=t,n.y=e,n.color=colors[anime.random(0,colors.length-1)],n.radius=anime.random(16,32),n.endPos=setParticuleDirection(n),n.draw=function(){ctx.beginPath(),ctx.arc(n.x,n.y,n.radius,0,2*Math.PI,!0),ctx.fillStyle=n.color,ctx.fill()},n}function createCircle(t,e){var n={};return n.x=t,n.y=e,n.color="#F00",n.radius=.1,n.alpha=.5,n.lineWidth=6,n.draw=function(){ctx.globalAlpha=n.alpha,ctx.beginPath(),ctx.arc(n.x,n.y,n.radius,0,2*Math.PI,!0),ctx.lineWidth=n.lineWidth,ctx.strokeStyle=n.color,ctx.stroke(),ctx.globalAlpha=1},n}function renderParticule(t){for(var e=0;e<t.animatables.length;e++)t.animatables[e].target.draw()}function animateParticules(t,e){for(var n=createCircle(t,e),i=[],a=0;a<numberOfParticules;a++)i.push(createParticule(t,e));anime.timeline().add({targets:i,x:function(t){return t.endPos.x},y:function(t){return t.endPos.y},radius:.1,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule}).add({targets:n,radius:anime.random(80,160),lineWidth:0,alpha:{value:0,easing:"linear",duration:anime.random(600,800)},duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule,offset:0})}function debounce(t,e){var n;return function(){var i=this,a=arguments;clearTimeout(n),n=setTimeout((function(){t.apply(i,a)}),e)}}var canvasEl;if(canvasEl=document.querySelector(".fireworks")){var ctx=canvasEl.getContext("2d"),numberOfParticules=30,pointerX=0,pointerY=0,tap="mousedown",colors=["#FF1461","#18FF92","#5A87FF","#FBF38C"],setCanvasSize=debounce((function(){canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+"px",canvasEl.style.height=window.innerHeight+"px",canvasEl.getContext("2d").scale(2,2)}),500),render=anime({duration:1/0,update:function(){ctx.clearRect(0,0,canvasEl.width,canvasEl.height)}});document.addEventListener(tap,(function(t){"sidebar"!==t.target.id&&"toggle-sidebar"!==t.target.id&&"A"!==t.target.nodeName&&"IMG"!==t.target.nodeName&&(render.play(),updateCoords(t),animateParticules(pointerX,pointerY))}),!1),setCanvasSize(),window.addEventListener("resize",setCanvasSize,!1)}function updateCoords(t){pointerX=(t.clientX||t.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=t.clientY||t.touches[0].clientY-canvasEl.getBoundingClientRect().top}function setParticuleDirection(t){var e=anime.random(0,360)*Math.PI/180,n=anime.random(50,180),i=[-1,1][anime.random(0,1)]*n;return{x:t.x+i*Math.cos(e),y:t.y+i*Math.sin(e)}}function createParticule(t,e){var n={};return n.x=t,n.y=e,n.color=colors[anime.random(0,colors.length-1)],n.radius=anime.random(16,32),n.endPos=setParticuleDirection(n),n.draw=function(){ctx.beginPath(),ctx.arc(n.x,n.y,n.radius,0,2*Math.PI,!0),ctx.fillStyle=n.color,ctx.fill()},n}function createCircle(t,e){var n={};return n.x=t,n.y=e,n.color="#F00",n.radius=.1,n.alpha=.5,n.lineWidth=6,n.draw=function(){ctx.globalAlpha=n.alpha,ctx.beginPath(),ctx.arc(n.x,n.y,n.radius,0,2*Math.PI,!0),ctx.lineWidth=n.lineWidth,ctx.strokeStyle=n.color,ctx.stroke(),ctx.globalAlpha=1},n}function renderParticule(t){for(var e=0;e<t.animatables.length;e++)t.animatables[e].target.draw()}function animateParticules(t,e){for(var n=createCircle(t,e),i=[],a=0;a<numberOfParticules;a++)i.push(createParticule(t,e));anime.timeline().add({targets:i,x:function(t){return t.endPos.x},y:function(t){return t.endPos.y},radius:.1,duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule}).add({targets:n,radius:anime.random(80,160),lineWidth:0,alpha:{value:0,easing:"linear",duration:anime.random(600,800)},duration:anime.random(1200,1800),easing:"easeOutExpo",update:renderParticule,offset:0})}function debounce(t,e){var n;return function(){var i=this,a=arguments;clearTimeout(n),n=setTimeout((function(){t.apply(i,a)}),e)}}if(canvasEl=document.querySelector(".fireworks")){ctx=canvasEl.getContext("2d"),numberOfParticules=30,pointerX=0,pointerY=0,tap="mousedown",colors=["#FF1461","#18FF92","#5A87FF","#FBF38C"],setCanvasSize=debounce((function(){canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+"px",canvasEl.style.height=window.innerHeight+"px",canvasEl.getContext("2d").scale(2,2)}),500),render=anime({duration:1/0,update:function(){ctx.clearRect(0,0,canvasEl.width,canvasEl.height)}});document.addEventListener(tap,(function(t){"sidebar"!==t.target.id&&"toggle-sidebar"!==t.target.id&&"A"!==t.target.nodeName&&"IMG"!==t.target.nodeName&&(render.play(),updateCoords(t),animateParticules(pointerX,pointerY))}),!1),setCanvasSize(),window.addEventListener("resize",setCanvasSize,!1)}!function(t,e,n){function i(){for(var t=0;t<r.length;t++)r[t].alpha<=0?(e.body.removeChild(r[t].el),r.splice(t,1)):(r[t].y--,r[t].scale+=.004,r[t].alpha-=.013,r[t].el.style.cssText="left:"+r[t].x+"px;top:"+r[t].y+"px;opacity:"+r[t].alpha+";transform:scale("+r[t].scale+","+r[t].scale+") rotate(45deg);background:"+r[t].color+";z-index:99999");requestAnimationFrame(i)}function a(t){var n=e.createElement("div");n.className="heart",r.push({el:n,x:t.clientX-5,y:t.clientY-5,scale:1,alpha:1,color:"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"}),e.body.appendChild(n)}var r=[];t.requestAnimationFrame=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},function(t){var n=e.createElement("style");n.type="text/css";try{n.appendChild(e.createTextNode(t))}catch(e){n.styleSheet.cssText=t}e.getElementsByTagName("head")[0].appendChild(n)}(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content:'';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"),function(){var e="function"==typeof t.onclick&&t.onclick;t.onclick=function(t){e&&e(),a(t)}}(),i()}(window,document);
// 烟花爆炸点特效
class Circle{constructor({origin:t,speed:e,color:n,angle:i,context:a}){this.origin=t,this.position={...this.origin},this.color=n,this.speed=e,this.angle=i,this.context=a,this.renderCount=0}draw(){this.context.fillStyle=this.color,this.context.beginPath(),this.context.arc(this.position.x,this.position.y,2,0,2*Math.PI),this.context.fill()}move(){this.position.x=Math.sin(this.angle)*this.speed+this.position.x,this.position.y=Math.cos(this.angle)*this.speed+this.position.y+.3*this.renderCount,this.renderCount++}}class Boom{constructor({origin:t,context:e,circleCount:n=16,area:i}){this.origin=t,this.context=e,this.circleCount=n,this.area=i,this.stop=!1,this.circles=[]}randomArray(t){const e=t.length;return t[Math.floor(e*Math.random())]}randomColor(){const t=["8","9","A","B","C","D","E","F"];return"#"+this.randomArray(t)+this.randomArray(t)+this.randomArray(t)+this.randomArray(t)+this.randomArray(t)+this.randomArray(t)}randomRange(t,e){return(e-t)*Math.random()+t}init(){for(let t=0;t<this.circleCount;t++){const t=new Circle({context:this.context,origin:this.origin,color:this.randomColor(),angle:this.randomRange(Math.PI-1,Math.PI+1),speed:this.randomRange(1,6)});this.circles.push(t)}}move(){this.circles.forEach((t,e)=>{if(t.position.x>this.area.width||t.position.y>this.area.height)return this.circles.splice(e,1);t.move()}),0==this.circles.length&&(this.stop=!0)}draw(){this.circles.forEach(t=>t.draw())}}class CursorSpecialEffects{constructor(){this.computerCanvas=document.createElement("canvas"),this.renderCanvas=document.createElement("canvas"),this.computerContext=this.computerCanvas.getContext("2d"),this.renderContext=this.renderCanvas.getContext("2d"),this.globalWidth=window.innerWidth,this.globalHeight=window.innerHeight,this.booms=[],this.running=!1}handleMouseDown(t){const e=new Boom({origin:{x:t.clientX,y:t.clientY},context:this.computerContext,area:{width:this.globalWidth,height:this.globalHeight}});e.init(),this.booms.push(e),this.running||this.run()}handlePageHide(){this.booms=[],this.running=!1}init(){const t=this.renderCanvas.style;t.position="fixed",t.top=t.left=0,t.zIndex="999999999999999999999999999999999999999999",t.pointerEvents="none",t.width=this.renderCanvas.width=this.computerCanvas.width=this.globalWidth,t.height=this.renderCanvas.height=this.computerCanvas.height=this.globalHeight,document.body.append(this.renderCanvas),window.addEventListener("mousedown",this.handleMouseDown.bind(this)),window.addEventListener("pagehide",this.handlePageHide.bind(this))}run(){if(this.running=!0,0==this.booms.length)return this.running=!1;requestAnimationFrame(this.run.bind(this)),this.computerContext.clearRect(0,0,this.globalWidth,this.globalHeight),this.renderContext.clearRect(0,0,this.globalWidth,this.globalHeight),this.booms.forEach((t,e)=>{if(t.stop)return this.booms.splice(e,1);t.move(),t.draw()}),this.renderContext.drawImage(this.computerCanvas,0,0,this.globalWidth,this.globalHeight)}}const cursorSpecialEffects=new CursorSpecialEffects;cursorSpecialEffects.init()
/* 社会主体核心价值观效果 */;var a_idx=0;jQuery(document).ready((function(t){t("body").click((function(e){// var a = new Array("❤富强❤","❤民主❤","❤文明❤","❤和谐❤","❤自由❤","❤平等❤","❤公正❤","❤法治❤","❤爱国❤","❤敬业❤","❤诚信❤","❤友善❤");
var n=new Array("富强","民主","文明","和谐","自由","平等","公正","法治","爱国","敬业","诚信","友善"),i=t("<span></span>").text(n[a_idx]);a_idx=(a_idx+1)%n.length;var a=e.pageX,r=e.pageY;i.css({"z-index":1e69,top:r-20,left:a,position:"absolute","font-weight":"bold",color:"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"}),t("body").append(i),i.animate({top:r-180,opacity:0},1500,(function(){i.remove()}))}))}));